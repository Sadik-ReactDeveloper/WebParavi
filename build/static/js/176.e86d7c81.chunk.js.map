{"version":3,"sources":["components/astrology/LiveAstro.js"],"names":["i","randomID","len","result","chars","maxPos","length","charAt","Math","floor","random","getUrlParams","url","window","location","href","urlStr","split","URLSearchParams","App","useLocation","console","log","state","videoliveStream","roomId","roomID","role_str","get","role","ZegoUIKitPrebuilt","Audience","sharedLinks","push","name","protocol","host","pathname","kitToken","generateKitTokenForTest","myMeeting","element","create","joinRoom","container","scenario","mode","LiveStreaming","config","className","ref","style","width","height"],"mappings":"kQACA,kmGAAAA,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,ssDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,sQAEA,SAASC,EAASC,GAChB,IAAIC,EAAS,GACb,GAAIA,EAAQ,OAAOA,EACnB,IAEEH,EAFEI,EAAQ,iEACVC,EAASD,EAAME,OAGjB,IADAJ,EAAMA,GAAO,EACRF,EAAI,EAAGA,EAAIE,EAAKF,IACnBG,GAAUC,EAAMG,OAAOC,KAAKC,MAAMD,KAAKE,SAAWL,IAEpD,OAAOF,EAEF,SAASQ,IAA0C,IAA7BC,EAAG,uDAAGC,OAAOC,SAASC,KAC7CC,EAASJ,EAAIK,MAAM,KAAK,GAC5B,OAAO,IAAIC,gBAAgBF,GAGd,SAASG,IAAO,IAAD,IACxBL,EAAWM,cACfC,QAAQC,IAAkB,QAAf,EAACR,EAASS,aAAK,aAAd,EAAgBC,iBAC5B,IAAIC,EAAuB,QAAjB,EAAGX,EAASS,aAAK,aAAd,EAAgBC,gBAC7B,GAAIC,EAAQ,CACV,IAAIC,EAASD,EAGTE,EAAWhB,EAAaE,OAAOC,SAASC,MAAMa,IAAI,SAAW,OAC3DC,EACS,aAAbF,EACIG,oBAAkBC,SACL,aAAbJ,EAEFK,EAAc,GACdH,IAASC,oBAAkBC,UAAyB,aAAbJ,GACzCK,EAAYC,KAAK,CACfC,KAAM,kBACNtB,IACEC,OAAOC,SAASqB,SAChB,KACAtB,OAAOC,SAASsB,KAChBvB,OAAOC,SAASuB,SAChB,WACAX,EACA,iBAGNM,EAAYC,KAAK,CACfC,KAAM,mBACNtB,IACEC,OAAOC,SAASqB,SAChB,KACAtB,OAAOC,SAASsB,KAChBvB,OAAOC,SAASuB,SAChB,WACAX,EACA,mBAGJ,IAEMY,EAAWR,oBAAkBS,wBAFrB,UACO,mCAInBb,EACAzB,EAAS,GACTA,EAAS,IAGPuC,EAAS,uCAAG,WAAMC,GAAO,iEAEhBX,oBAAkBY,OAAOJ,GAEjCK,SAAS,CACVC,UAAWH,EACXI,SAAU,CACRC,KAAMhB,oBAAkBiB,cACxBC,OAAQ,CACNnB,SAGJG,gBACC,2CACJ,gBAdY,sCAgBb,OACE,uBACEiB,UAAU,kBACVC,IAAKV,EACLW,MAAO,CAAEC,MAAO,QAASC,OAAQ","file":"static/js/176.e86d7c81.chunk.js","sourcesContent":["import * as React from \"react\";\r\nimport { ZegoUIKitPrebuilt } from \"@zegocloud/zego-uikit-prebuilt\";\r\nimport { useHistory, useLocation, useParams } from \"react-router-dom\";\r\nfunction randomID(len) {\r\n  let result = \"\";\r\n  if (result) return result;\r\n  var chars = \"12345qwertyuiopasdfgh67890jklmnbvcxzMNBVCZXASDQWERTYHGFUIOLKJP\",\r\n    maxPos = chars.length,\r\n    i;\r\n  len = len || 5;\r\n  for (i = 0; i < len; i++) {\r\n    result += chars.charAt(Math.floor(Math.random() * maxPos));\r\n  }\r\n  return result;\r\n}\r\nexport function getUrlParams(url = window.location.href) {\r\n  let urlStr = url.split(\"?\")[1];\r\n  return new URLSearchParams(urlStr);\r\n}\r\n\r\nexport default function App() {\r\n  let location = useLocation();\r\n  console.log(location.state?.videoliveStream);\r\n  let roomId = location.state?.videoliveStream;\r\n  if (roomId) {\r\n    let roomID = roomId;\r\n    //   const roomID = roomId;\r\n    // getUrlParams().get(\"roomID\") || randomID(5);\r\n    let role_str = getUrlParams(window.location.href).get(\"role\") || \"Host\";\r\n    const role =\r\n      role_str === \"Audience\"\r\n        ? ZegoUIKitPrebuilt.Audience\r\n        : role_str === \"Audience\";\r\n\r\n    let sharedLinks = [];\r\n    if (role === ZegoUIKitPrebuilt.Audience || role_str === \"Audience\") {\r\n      sharedLinks.push({\r\n        name: \"Join as co-host\",\r\n        url:\r\n          window.location.protocol +\r\n          \"//\" +\r\n          window.location.host +\r\n          window.location.pathname +\r\n          \"?roomID=\" +\r\n          roomID +\r\n          \"&role=Cohost\",\r\n      });\r\n    }\r\n    sharedLinks.push({\r\n      name: \"Join as audience\",\r\n      url:\r\n        window.location.protocol +\r\n        \"//\" +\r\n        window.location.host +\r\n        window.location.pathname +\r\n        \"?roomID=\" +\r\n        roomID +\r\n        \"&role=Audience\",\r\n    });\r\n    // generate Kit Token\r\n    const appID = 913321685;\r\n    const serverSecret = \"ec2b5151f49c5376a2e91a5a81a69bc0\";\r\n    const kitToken = ZegoUIKitPrebuilt.generateKitTokenForTest(\r\n      appID,\r\n      serverSecret,\r\n      roomID,\r\n      randomID(5),\r\n      randomID(5)\r\n    );\r\n    // start the call\r\n    let myMeeting = async element => {\r\n      // Create instance object from Kit Token.\r\n      const zp = ZegoUIKitPrebuilt.create(kitToken);\r\n      // start the call\r\n      zp.joinRoom({\r\n        container: element,\r\n        scenario: {\r\n          mode: ZegoUIKitPrebuilt.LiveStreaming,\r\n          config: {\r\n            role,\r\n          },\r\n        },\r\n        sharedLinks,\r\n      });\r\n    };\r\n\r\n    return (\r\n      <div\r\n        className=\"myCallContainer\"\r\n        ref={myMeeting}\r\n        style={{ width: \"100vw\", height: \"100vh\" }}\r\n      ></div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}